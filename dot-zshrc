# vim: ft=zsh
export CLICOLOR=1
export EDITOR='vim'
export GREP_OPTIONS='--color=auto'
# Highlight section titles in manual pages
export LESS_TERMCAP_md=$(tput setaf 64);
export PATH="$HOME/Applications/Scripts:$HOME/.cabal/bin:usr/local/sbin:$PATH"
export FZF_DEFAULT_COMMAND='rg --files 2>/dev/null'
export FZF_DEFAULT_OPTS='
  --color fg:242,bg:-1,hl:238,fg+:243,bg+:-1,hl+:166
  --color info:248,prompt:243,spinner:242,pointer:242,marker:166'
GPG_TTY=$(tty)
export GPG_TTY

# Functions
fpath+=~/.zshfunctions
autoload topten
autoload man2pdf

# Parameters used by the shell (http://zsh.sourceforge.net/Doc/Release/Parameters.html)
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8
HISTFILE=${ZDOTDIR:-$HOME}/.zsh_history
HISTSIZE=5000
SAVEHIST=4000
lf_ssh=$([ "${SSH_TTY}" ] && echo "⎋ ")
PROMPT='%(?..%F{red}✗%f )%F{yellow}%n%f at %F{green}%m%f in %F{magenta}%~%f
]'
PROMPT2="→ ";

# ZSH options (http://zsh.sourceforge.net/Doc/Release/Options.html)

# Changing directories
setopt auto_cd
setopt auto_pushd
setopt pushd_ignore_dups
setopt pushd_minus
# Expansion and globbing
setopt glob
setopt no_case_glob
setopt no_case_match
# History
setopt append_history
setopt hist_fcntl_lock
setopt hist_ignore_all_dups
setopt hist_ignore_space
setopt hist_lex_words
setopt hist_reduce_blanks
setopt hist_verify
setopt menu_complete
setopt no_inc_append_history
setopt share_history
# Input//Output
setopt correct
setopt correct_all
setopt no_flow_control

# Completion
setopt glob_complete
zstyle ':completion:*:*:*:*:*' menu select
zstyle ':completion:*' matcher-list 'm:{[:lower:]}={[:upper:]} r:|[._-]=* r:|=*' 'm:{[:lower:]}={[:upper:]}' 'm:{[:lower:]}={[:upper:]}' 'm:{[:lower:]}={[:upper:]}'
autoload -Uz compinit && compinit
# Load bashcompinit for some old bash completions
autoload bashcompinit && bashcompinit
[[ -r /usr/local/etc/bash_completion.d/fossil-autocomplete.bash ]] && source /usr/local/etc/bash_completion.d/fossil-autocomplete.bash

# Aliases
alias .2="cd ../.."
alias .3="cd ../../.."
alias .4="cd ../../../.."
alias .5="cd ../../../../.."
alias .6="cd ../../../../../.."
alias asmake='./makefile.applescript'
alias f=fossil
# Suffix aliases
alias -s html="open -a Firefox"
alias -s  txt="vim"
alias -s   md="vim"
alias -s  vim="vim"

# Emacs key bindings (use -v for vi key bindings)
bindkey -e
# Better history navigation (matches current text)
bindkey $'^[[A' up-line-or-search    # up arrow
bindkey $'^[[B' down-line-or-search  # down arrow

